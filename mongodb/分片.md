# 分片

1. 什么是分片和集群中的组件

2. 如何配置
3. 基础操作

## 分片概念

分片就是在多台机器上，切割数据；把数据分成一个一个小的子集，然后每个机器存储一部分数据子集。

分片有两个用处：

1. 根据地理位置，把应用服务器经常访问的子集放在距离应用服务器近的机器上
2. 把访问较为频繁的子集放在性能好的机器上。

手动分片：程序连接多个独立的mongodb，然后根据配置自己去到对应的Mongodb上去存取数据。缺点是增加，减少节点比较麻烦。

mongodb可以创一个集群在不同的机器上，每个机器是一个分片，把一个collection拆分成多个集合存储在不同的分片上。最终实现几百台机器组合在一起像一台机器一样使用。复制集是整个复制。

<img src="https://i.loli.net/2020/09/16/svMuUEc2GlkpBbP.png" alt="image-20200916231439402 " style="zoom:25%;" />

客户端连接mongos，mongos维护内容的表，转发请求到对应的mongod，如果涉及到多个mongod德华，还会对返回的结果进行合并。

## 配置分片



